<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Architecture - Py DDD CQRS Microservice Boilerplate</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Architecture";
        var mkdocs_page_input_path = "Architecture.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Py DDD CQRS Microservice Boilerplate
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Architecture</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#architecture-decision-record">Architecture Decision Record</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#modules">Modules</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#domain">Domain</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#adapters">Adapters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#service-layer">Service Layer</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#entrypoints">Entrypoints</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Responsibilities/">Responsibilities</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Design Decisions</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../adr/ADRs/">ADRs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Technologies</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../adr/technologies/000-FastAPI/">Fast API</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../adr/technologies/001-Pydantic/">Pydantic</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Practices</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../adr/practices/000-Readiness%20probe/">Readiness Probe</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../adr/practices/001-Dependency%20inversion/">Dependency Inversion</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../adr/practices/002-Domain%20Specific%20Exceptions/">Domain Specific Exceptions</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Py DDD CQRS Microservice Boilerplate</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Architecture</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="architecture">Architecture</h1>
<p>This application follows the architecture suggested in
the Cosmic Python book: <a href="https://www.cosmicpython.com/">https://www.cosmicpython.com/</a></p>
<p>The Cosmic Python book provides guidelines to implement
a good DDD architecture in python.</p>
<p>The architecture of this project is <strong>NOT</strong> based on:</p>
<ul>
<li>the Active Record pattern (Django like)</li>
<li>Exagonal Architecture (even though similarities can be found)</li>
<li>Clean Architecture (even though similarities can be found)</li>
</ul>
<p>Please refer to the book's <a href="https://www.cosmicpython.com/book/preface.html">preface</a> to check how this architecture
relates to the ones I mentioned before.</p>
<h2 id="architecture-decision-record">Architecture Decision Record</h2>
<p>This project includes a folder of <a href="https://adr.github.io/">Architecture Decision Records</a>, check it
out <a href="../adr/ADRs/">here</a>.</p>
<h2 id="modules">Modules</h2>
<p>The responsibilities in this API can be assigned to modules:</p>
<ul>
<li>Domain (<code>domain</code> module)</li>
<li>Adapters (<code>adapters</code> module)</li>
<li>Service Layer (<code>services</code> module)</li>
<li>Entrypoints (<code>entrypoints</code> module)</li>
</ul>
<h3 id="domain">Domain</h3>
<p><code>domain</code> implements the Ubiquitous Language specific to our Domain.
In this module are included only Pure python classes and functions that aim to have no infrastructure dependencies (
frameworks, persistence, data transfer etc).</p>
<p>This module has to remain portable to any other python project and testable as a unit.</p>
<p>The module is further divided in 2 modules:</p>
<ul>
<li><code>models</code>, including the classes that implement DDD's Entities and ValueObjects</li>
</ul>
<p>Please check the paragraph "Not Everything Has to Be an Object: A Domain Service Function" from
the <a href="https://www.cosmicpython.com/book/chapter_01_domain_model.html">Cosmic Python's 1st chapter</a></p>
<p>Best quote:</p>
<blockquote>
<p>Sometimes, it just isn’t a thing. — Eric Evans, Domain-Driven Design</p>
</blockquote>
<p>Please check the <a href="../domain/docs/README.md">Domain</a> documentation page for more details.</p>
<h3 id="adapters">Adapters</h3>
<p><code>adapters</code> implements the "adaptation" to the foundation/backing services.
As a pattern they implement the following:</p>
<ul>
<li>An interface that has to be used by all the clients, unaware of technological details</li>
<li>A concrete implementation on top of a specific technology</li>
</ul>
<p>The goal is to provide an easy to swap set of adaptation objects to protect
the code from changes in technological choices.</p>
<p>The Adapters module includes the Repository classes.
A Repository is a simplifying abstraction over data storage,
allowing us to decouple our model module from the data module.</p>
<p>The repositories in this module are implemented using the Adapter pattern.</p>
<p>Please check the paragraph "Repository Pattern" from the
<a href="https://www.cosmicpython.com/book/chapter_02_repository.html">Cosmic Python's 2nd chapter</a></p>
<h3 id="service-layer">Service Layer</h3>
<p><code>services</code> uses the Adapters and the Domain to implement services used outside.
The Services functions/classes implement a contract with external clients. Potentially only tests against the
ServiceLayer surface (interface) should be granted since the internal implementation details of the domain model should
remain hidden to external clients.</p>
<p>You can consider the services at the same level of the UseCases of the Exagonal Architecture/Clean Architecture.</p>
<p>Their interface should never expose domain objects outside and should not accept them as parameters.
For this reason all the services implemented in this project accept/expose DTOs (Data Transfer Objects) that
are not the domain objects, the structure of these objects is part of the "contract" of the service module.</p>
<p>Their interface should allow the passage of Repositories from outside, following the Dependency Inversion principle (
SOLID).</p>
<h3 id="entrypoints">Entrypoints</h3>
<blockquote>
<p>Entrypoints are the places we drive our application from. In the official ports and adapters terminology,
these are adapters too, and are referred to as primary, driving, or outward-facing adapters.</p>
</blockquote>
<p><code>entrypoints</code> is the module (and the only one) that is dependent from technological choices related
to the web technology one might want to choose.
In a well implemented DDD architecture, all the technological choices are taken in the adapters/entrypoints
modules.</p>
<p>Some technologies might be used in the service module to facilitate serialization/deserialization and
validation (pydantinc to implement the DTOs in our case).</p>
<p>No technological dependencies are added to the domain module. Pure classes/functions implemented
using language functionalities as much as possible</p>
<p>In this project we provide one entrypoint in the form of a web application server implemented
with FastAPI.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Responsibilities/" class="btn btn-neutral float-right" title="Responsibilities">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="../Responsibilities/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
